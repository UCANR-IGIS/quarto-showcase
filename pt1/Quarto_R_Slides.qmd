---
pagetitle: "Quarto Showcase"
format: 
  revealjs:
    title-slide: false
theme: solarized
css: ../ucanr-style.css
toc: false
---

<!-- This is called article layout! -->

<section data-transition="fade">
<h1>Quarto Showcase</h1>
<span style="font-size:36px;color: #005fae;">12-12-2025<br></span>
<div style="text-align:center;">
:::: {.columns gap="2em"}
::: {.column}
![](image_assets/UCCE_Color.png){width=400}
:::
::: {.column}
![](image_assets/igis-logo_460x144 (1).png){width=400}
:::
::::
</div>

</section>

<section data-transition="fade">
<h1>Quarto Showcase</h1>
<span style="font-size:36px;color: #005fae;">12-12-2025</em></span>
<div style="text-align:center;">
:::: {.columns gap="2em" align="center"}
::: {.column text-align="center"}
![](image_assets/UCCE_Color.png){width=400}
:::
::: {.column text-align="center"}
![](image_assets/igis-logo_460x144 (1).png){width=400}
:::
::::
</div>
<div style="text-align:center;">
:::: {.columns align="center"}
::: {.column width="25%" text-align="center"}
<div style="text-align:center;color: #005fae;">
  <img src="image_assets/staff_circles/1andy_circle.png" width="200"><br>
  <span style="font-size:24px;">Andy Lyons</span>
</div>
:::
::: {.column width="25%" text-align="center"}
<div style="text-align:center;color: #005fae;">
  <img src="image_assets/staff_circles/7taiyu_circle.png" width="200"><br>
  <span style="font-size:24px;">Taiyu Guan</span>
</div>
:::
::: {.column width="25%" text-align="center"}
<div style="text-align:center;color: #005fae;">
  <img src="image_assets/staff_circles/6genoa_circle.png" width="200"><br>
  <span style="font-size:24px;">Genoa Starrs</span>
</div>
:::
::::
</div>
</section>

<section data-transition="slide">
<div style="display: flex; align-items: center; gap: 20px;">
  <h2 style="margin: 0; color:#005fae; font-weight:500;">
    The IGIS Team
  </h2>
  <img src="image_assets/igis-logo_460x144 (1).png" width="300">
</div>

```{r}
library(htmltools)

# Folder with images
img_folder <- "image_assets/staff_circles"

# List PNG files
img_files <- list.files(
  img_folder,
  pattern = "^[0123456].*\\.png$",
  full.names = TRUE
)

# Labels for each image
labels <- c(
  "Maggi Kelly",
  "Andy Lyons",
  "Sean Hogan",
  "Shane Feirer",
  "Robert Johnson",
  "Priyanka Vyas",
  "Genoa Starrs"
)

# Build list of divs for each staff member
staff_divs <- mapply(
  function(img, label) {
    label_html <- gsub(" ", "<br>", label)

    div(
      style = "
        text-align: center; 
        font-size: 24px;
        font-weight: 500;
        line-height: 1.2em;
        color: #005fae;
      ",
      tags$img(src = img, width = "130px", style = "border-radius: 50%;"),
      HTML("<br>"),
      HTML(label_html)
    )
  },
  img_files,
  labels,
  SIMPLIFY = FALSE
)

# Wrap in outer flexbox container
htmltools::div(
  style = "display: flex; justify-content: center; align-items: flex-start; gap: 15px;",
  staff_divs
)

```
<br>

::: {.styled-table style="font-size: 24px; color: #005fae; padding: 0px;"}
| GIS & Drone Services | Workshops | Office Hours <br><span style="font-size:18px;">[*Sign-up link!*](https://igis.ucanr.edu/Office_Hours/)</span> |
|----------------------|-----------|----------------------------------------------------------------------------------------------------------------|
|<img src="image_assets\drone.png" width="250" style="vertical-align: top;"></div>| <span style="font-size:18px;"> • ArcGIS Story Maps <br> • Geoprocessing with Python <br> • ArcGIS Field Maps <br> • Intro to ArcGIS Online <br> • Spatial Analysis with R and Python </span>  | <span style="font-size:18px;">• Using spatial data in research and extension <br> • Software and Apps <br> • Drones <br> • Research Data and Analysis <br> • Programming </span>|
:::

</section>

<section data-auto-animate>
  <h1>What is</h1>
  <h1>Quarto</h1>
</section>

<section data-auto-animate>
  <h1>Quarto</h1>
<p><em>"An open-source scientific and technical publishing system"</p></em>
</section>

<section data-auto-animate>
  <h1>Quarto</h1>
<p><em>"An open-source scientific and technical publishing system"</p></em><br>
<p>Create reproducible documents, presentations, and websites using text, code, and data.</p>
</section>

<section data-auto-animate>
  <h1>Quarto</h1>
<p><em>"An open-source scientific and technical publishing system"</p></em><br>
<p>Create reproducible documents, presentations, and websites using text, code, and data.</p><br>
<p>A successor to R Markdown</p><br>
</section>



<section data-transition="slide">
  <h1 style="color: #024780;">Why</h1>
   <h1 style="color: #024780;"> **Quarto?**</h1> </section>

<section data-transition="slide">
  <h1 style="color: #024780;">Why <br> <span style="color: #005fae;">NOT </span><span class="sparkle" style="font-weight:bold; color: #005fae;">Quarto</span>?
  </h1>
  <ul>
    <li class="fragment">Cross-platform (windows, macOS)</li>
    <li class="fragment">Open source</li>
    <li class="fragment">Reproducible content (generate and RE-generate lots of reports)</li>
    <li class="fragment">Multi-lingual (R, Python, Julia)</li>
    <li class="fragment">Flexible output formats (HTML, PDF, Word, slides, books, dashboards)</li>
    <li class="fragment">Customizable (create your own templates, or use built-in options)</li>
    <li class="fragment">Leverages existing ecosystem of extensions for R and Python (like soils)</li>
    <li class="fragment">Supports interactive content!</li>
  </ul>
</section>

<section data-transition="slide">
<div style="display: flex; align-items: center; gap: 20px;">
  <img src="image_assets/igis-logo_460x144 (1).png" width="300">
    <h4 style="margin: 0; color:#005fae; font-weight:0; font-family:inherit; font-size:18px;">
    Agriculture • Natural Resources • Nutrition • Youth Development
  </h4>
</div>

```{r, message=FALSE}
#| column: screen-inset

library(sf)
library(leaflet)
library(htmlwidgets)

# Read the GeoPackage (same as Python)
UC_ANR <- sf::st_read("UC_ANR.gpkg", quiet = TRUE)

# Extract coordinates (leaflet prefers regular columns)
coords <- sf::st_coordinates(UC_ANR)
UC_ANR$lon <- coords[, "X"]
UC_ANR$lat <- coords[, "Y"]

# Shape + color map equivalent to Python version
shape_map <- list(
  "UCCE"      = list(sides = 30, color = "purple"),  # circle
  "UC Campus" = list(sides = 5,  color = "red"),     # pentagon
  "REC"       = list(sides = 3,  color = "green")    # triangle
)

# Start the leaflet map
m <- leaflet(UC_ANR) |> 
  addTiles() |> 
  setView(lng = -119.4179, lat = 36.7783, zoom = 6)

# Add symbols
for (i in seq_len(nrow(UC_ANR))) {
  row <- UC_ANR[i, ]

  cat <- row$CATEGORY
  lat <- row$lat
  lon <- row$lon
  label <- row$Location

  if (cat == "UCOP") {
    # Star icon marker (FontAwesome)
    m <- m |> addAwesomeMarkers(
      lng = lon, lat = lat,
      popup = label,
      icon = awesomeIcons(
        icon = "star",
        iconColor = "black",
        markerColor = "lightyellow"
      )
    )
  } else {
    # Polygon marker (circle/pentagon/triangle)
    sides <- shape_map[[cat]]$sides
    color <- shape_map[[cat]]$color
    radius <- 5000   # leaflet polygon size in meters; adjust as needed
    
    # Build a regular polygon around the point
    theta <- seq(0, 2*pi, length.out = sides + 1)
    dx <- radius * cos(theta)
    dy <- radius * sin(theta)

    polygon_coords <- cbind(lon + dx * 0.00001, lat + dy * 0.00001)

    m <- m |> addPolygons(
      lng = polygon_coords[,1],
      lat = polygon_coords[,2],
      fillColor = color,
      fillOpacity = 0.9,
      color = color,
      weight = 1,
      popup = label
    )
  }
}
m

# # Save the map under a NEW NAME so it doesn't conflict with Python's version
# htmlwidgets::saveWidget(m, "map_for_slide_R.html", selfcontained = TRUE)

# # Display iframe in Quarto slide
# htmltools::HTML('
# <div style="width:700px; height:450px; margin:auto; overflow:hidden;">
#     <iframe src="map_for_slide_R.html" width="100%" height="100%" style="border:none;"></iframe>
# </div>
# ')
```

<div style="text-align:center; color:#005fae; font-weight:400; font-style:italic; margin-top:15px; line-height:1.4;"> 
<p style="font-size:20px !important;">"Connecting the power of UC research with local communities to improve the lives of all Californians."</p>
</div> 
</section>


<section data-transition="slide">
<p stye="font-size:42px">... No really,</p>
</section>

<section data-transition="slide">
 <h1 style="color: #024780;">Why <br> <span style="color: #005fae;">NOT</span>
 </span><span class="sad_sparkle" style="font-weight:bold; color: #ffff"> Quarto</span>?
  </h1>
  <ul>
    <li class="fragment">Loss of click-and-drag</li>
    <li class="fragment">Relatively new on the scene</li>
    <li class="fragment">Learning curve</li>
    <li class="fragment">**especially for non-coders!**</li>
    <li class="fragment fade-left">You have to tell the computer what you want in language it understands</li>
    <li class="fragment fade-left">... and it will give you <em>EXACTLY</em> what you ask for.</li>
  </ul>
</section>

<section data-auto-animate>
  <p>If you're used to <strong>Coding</strong> and:</p>
  <ul>
    <li>R Markdown </li>
    <li>R or Python</li>
    <li>Jupyter Notebooks</li>
  </ul>
</section>

<section data-auto-animate>
  <p>If you're used to <strong>Coding</strong> and:</p>
  <ul>
    <li style="color: #005fae;">R Markdown </li>
    <li style="color: #005fae;">R or Python</li>
    <li style="color: #005fae;">Jupyter Notebooks</li>
    </ul>
Quarto is a **natural progression.**

</section>

<section data-auto-animate>
    <p>If you're used to **User Interfaces** like:<p>
  <ul>
    <li style="color: #005fae;">Word</li>
    <li style="color: #005fae;">Powerpoint</li>
    <li style="color: #005fae;">Google Docs</li>
  </ul>
</section>

<section data-auto-animate>
    <p>If you're used to **User Interfaces** like:<p>
  <ul>
    <li style="color: #005fae;">Word</li>
    <li style="color: #005fae;">Powerpoint</li>
    <li style="color: #005fae;">Google Docs</li>
    </ul>
Quarto will have **more of a learning curve,** but is still useful!

</section>

<section>
<p><strong>Presenting Code in Quarto</strong></p>
<p>You can show code chunks easily in your presentation to show your work!</p>

```{r}
#| echo: true   # show the code
#| eval: true
# Import packages
library(ggplot2)
library(sf)

# Read the UCANR data
UC_ANR <- sf::st_read("UC_ANR.gpkg", quiet = TRUE)

# Use ggplot2 to plot the data
p<- ggplot(UC_ANR, aes(x = CATEGORY, fill = AcademicTitle)) +
  geom_bar(position = "fill") +
  scale_y_continuous(labels = scales::percent_format()) +
  labs(
    x = "Work Location Type",
    y = "Percent of Positions",
    fill = "Job Titles"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),
    # Specify a transparent background
    panel.background = element_rect(fill = "transparent", color = NA),
    plot.background  = element_rect(fill = "transparent", color = NA),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank()
  )

ggsave("transparent_plot.png", plot = p, bg = "transparent", width = 8, height = 4)

```

</section>

<section>
**Stacked Percentage of UC ANR Position Titles by Work Location**
<img src="transparent_plot.png" width="1200">
</section>

