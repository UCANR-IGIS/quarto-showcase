---
title: "Part 2: HTML Outputs"
pagetitle: "Pt2 Quarto Showcase"
format: 
  revealjs:
    theme: simple
    df-print: paged
    auto-stretch: false
    # smaller: false
    fontsize: "24pt"
    logo: images/igis-ucce.svg
    code-block-height: 550px
    css: 
      - pt2.css
engine: knitr
---

## It all starts with a qmd file

\

![](./images/render_btn_168x50.png){style="display:block; margin:1em auto; width:130px;"}

::: {style="text-align: center;"}

```{mermaid, cache = TRUE}
flowchart LR
  A[qmd] --> B(Jupyter)
  A --> C(knitr)
  B --> D[md]
  C --> D
  D --> E(pandoc)
  E --> F[pdf]
  E --> G[html]
  E --> H[docx]
  
  classDef yellowBox fill:#FFFFC0
  class B,C,E yellowBox
```

:::

## Anatomy of a Quarto Document

````{verbatim, lang="markdown"}
---
title: "The Palmer Penguins"
format: html
---

## About the Penguins

The palmerpenguins data contains size measurements for three penguin species 
observed on three islands in the 
[Palmer Archipelago](https://en.wikipedia.org/wiki/Palmer_Archipelago), 
Antarctica.

![](images/palmer-archipelago.jpg)

There are three species of penguins in the dataset:

```{r}
library(dplyr)
penguins |> 
  group_by(island, species) |> 
  summarize(count = n())
```

## Body Mass Comparison

Adelie and Chinstrap penguins have approximately the same body mass. 
Gentoo penguins however are noticeably bigger.

```{r}
library(ggplot2)
ggplot(penguins, aes(x = species, y = body_mass)) +
  geom_boxplot()
```

````

\

\

::: {.notes}
- Quarto files are plain text.  
- Open palmer-penguins.qmd in RStudio.  
- Show source vs. visual editing mode.  
- Show the YAML, paragraph text, code chunks.  
- How to run code-chunks inline.  
- Set the preview to Viewer Pane.  
- Render the document to the Viewer Pane  
:::

## Example: Data Analysis Notebook

\

\

:::{style="text-align:center;"}
<https://ucanr-igis.github.io/tech_notes/cropdist-dwr-local-stats.html>
:::

::: {.notes}
Show them:

- header  
- enhanced author info  
- table of contents pane  
- anchors at all headings  
- footnotes  
- code chunks: copy button  
- code chunks: code links  
- widgets  
- callout blocks  
- emoji (Which attribute field contains the ‘crop’?)  
:::


## Markdown favorites: Callout Blocks

\

Quarto has several 'callout blocks' that you can use to add text boxes.

````{verbatim, lang="markdown"}
::: {.callout-important}
## Don't forget to add a user-agent to your `httr2` header

The __User-Agent__ header is an HTTP header intended to identify the user agent responsible 
for making a given HTTP request. 
:::
````

::: {.downarrow}
&darr; &darr; &darr;
:::

::: {.callout-important}
## Don't forget to add a user-agent to your `httr2` header

The __User-Agent__ header is an HTTP header intended to identify the user agent responsible for making a given HTTP request. 
:::

::: {.centerme}
__TIPS:__  
other callout types: `note`, `warning`, `tip`, `caution`  
for a collapsable callout, add `collapse = TRUE`
:::

## [Markdown Favorite:]{.title-prefix} Hyperlinks

\

Hyperlinks are easy to add to text. 

\

````{verbatim, lang="markdown"}
For more info, please visit our [training page](https://igis.ucanr.edu/Training/).
````

::: {.downarrow}
&darr; &darr; &darr;
:::

For more info, please visit our [training page](https://igis.ucanr.edu/Training/).

\

::: {.callout-tip}
If you want a hyperlink to open in a **new tab**, add the target attribute:

````{verbatim, lang="markdown"}
For more info, please visit our [training page](https://igis.ucanr.edu/Training/){target='_blank'}.
````

:::

::: {.notes}
See also https://quarto.org/docs/authoring/markdown-basics.html
:::

## [Markdown Favorite:]{.title-prefix} Add a blank line

\

Sometimes, you just want an actual...

\

blank \

\

line!!

::: {style="text-align:center;"}
Your best friend: `\`
:::

````{verbatim, lang="markdown"}
Spread

\

this

\ 

out!
````


::: {.notes}
There should not be a space after the \
:::

## [Markdown Favorite:]{.title-prefix} Footnotes

\

````{verbatim, lang="markdown"}
Growers in the Valley may have to manage one additional generation of Navel orangeworm each 
season under climate change [^1].

[^1]: based on a degree day model with project climate data, see Pathak et al (2021)
````
::: {.downarrow}
&darr; &darr; &darr;
:::

Growers in the Valley may have to manage one additional generation of Navel orangeworm each season under 
climate change [^1].

[^1]: based on a degree day model with project climate data, see Pathak et al (2021)

\

::: {.callout-note}
## Footnote Tips

- footnotes will be auto-numbered
- on a HTML document, footnote numbers get hyperlinked to the note  
:::

## [Markdown Favorite:]{.title-prefix} Interactive Plots {.scrollable}

\

````{verbatim, lang="markdown"}
library(plotly)
plot_ly(data = penguins, x = ~bill_len, y = ~bill_dep, color = ~species) |> 
  layout(title = "Penguins: Bill depth vs. length", 
         xaxis = list(title = "length"),
         yaxis = list(title = "depth"))
````

::: {.downarrow}
&darr; &darr; &darr;
:::

::: {id="penguins_plotly"}

```{r plotly_example}
library(plotly)

plot_ly(data = penguins, x = ~bill_len, y = ~bill_dep, color = ~species) |> 
  layout(title = "Penguins: Bill depth vs. length", 
         xaxis = list(title = "length"),
         yaxis = list(title = "depth"))
```

:::

\

::: {.notes}
 - hover text  
 - zoom in & out  
 - display / hide series from the legend
:::

## [YAML Favorite:]{.title-prefix} Author Info

``` yaml
---
title: "Deficit Irrigation in Pistachio"
author:
  - name: Andy Lyons
    orcid: 0000-0002-7505-6709
    affiliations:
      - name: IGIS, UC Division of Agriculture and Natural Resources
        url: https://igis.ucanr.edu/
    corresponding: true
    email: andlyons@ucanr.edu
---
```

::: {.downarrow}
&darr; &darr; &darr;
:::

```{=html}
<iframe src="../samples/enhanced-author-info.html" width="100%" height="240" style="border:1px solid gray;"></iframe>
```

\

## [YAML Favorite:]{.title-prefix} Paged Tables {.scrollable}

``` yaml
---
format:
  html:
    df-print: paged
---
```

::: {.downarrow}
&darr; &darr; &darr;
:::

```{r penguins_tbl, rows.print=8}
penguins
```

## [More YAML Favorites:]{.title-prefix} Table-of-Contents, Code-Links, Code-Tools, and Single File

``` yaml
---
format:
  html:
    ## To have a TOC, add the following
    toc: true
    toc-depth: 2
    toc-expand: 3
    
    ## Add hyperlinks in code chunks to online help pages
    code-link: true

    ## Embed the qmd file
    code-tools: true

    ## Create a single HTML file
    embed-resources: true
---
```

\

::: {.centerme}
All YAML options:  
<https://quarto.org/docs/reference/formats/html.html>  
:::

## [Example:]{.title-prefix} e-Book

\

**Quarto e-Book Features:**

:::: {.columns style="font-size:90%; column-gap: 2em;" }

::: {.column width="30%"}
- professionally designed themes  
- light & dark mode  
- table of contents pane  
- previous / next chapter buttons
:::

::: {.column width="5%"}
:::

::: {.column width="25%"}
- citation shortcodes  
- cross-references  
- GitHub links  
- 3rd party plugins
:::

::: {.column width="5%"}
:::

::: {.column width="30%"}
- search widget  
- download as pdf & epub  
- author info in sidebar  

:::
::::

\

:::{style="text-align:center;"}
Example:  
<https://ucanr-igis.github.io/agroclimate-cookbook/>
:::

\

::: {.notes}
Show them:

- search widget  
- table of contents  
- Chapter 3 > sample citation  
- GitHub links  
- hypothesis comments  
:::

## Anatomy of an e-Book

The structure of an e-Book is setup in a file called `_quarto.yml`.

``` yaml
project:
  type: book
  output-dir: "docs"

editor: source

book:
  title: "AgroClimate Cookbook"
  subtitle: "Code recipes for working with weather-driven agricultural metrics"
  editor:
   - Andy Lyons
  contributor:
   - Chloe Faehndrich
  date: today
  cover-image: "cover.png"
  chapters:
    - index.qmd
    - 01_data-wrangling.qmd
    - 02_weather-data.qmd
    - 03_simple-agroclim-metrics.qmd
    - 04_degday.qmd
    - 05_chill.qmd
    - 06_agroclimate-rasters.qmd
    - 07_modeled-climate-data.qmd
    - 08_climate-analogues.qmd
    - 99_other.qmd
    - references.qmd
  repo-url: https://github.com/ucanr-igis/agroclimate-cookbook/
  repo-actions: 
    - issue
    - edit

bibliography: references.bib

comments:
  hypothesis:
    theme: clean
    openSidebar: false

format:
  html:
    theme: cosmo
    df-print: paged
    toc-depth: 4
    toc-expand: 4
    link-external-icon: true
    link-external-newwindow: true
    code-link: true

  # We will add support for epub and pdf when it is a little more developed
  # pdf:
  #   documentclass: scrreprt
```

## [Example:]{.title-prefix} Reports

Have a lot of data? Create data-driven reports programmatically!

For a single-page report:

- Loop through rows in a table  
- For each row, use  functions from [htmltools](https://rstudio.github.io/htmltools/) to generate the HTML output  
- Quarto renders the whole thing to HMTL
- Use headings & TOC for basic navigation  

:::{style="text-align:center;"}
Example:  
<https://ucanr-igis.github.io/sketchbook/movie-catalog.html>
:::

\

::: {.callout-tip title="Parameterized Reports"}
To create a separate HTML file for each record, Google 'parameterized Quarto reports'.
:::

## Presentations

Quarto can generate presentations in 3 formats:

![](./images/new-quarto-slides576x512x256.png){style="display:block; margin:1em auto; border:1px solid grey;"}

::: {.notes}
You can create slides in revealjs, beamer (requires LaTeK), or PowerPoint
:::


## Presenting revealjs Slides

\

|                          |                                                                            |
|:------------------------:|:---------------------------------------------------------------------------|
|`f`                       | full screen mode (`esc` to escape)                                         |
|`s`                       | open Speaker View                                                          |
|`alt + click`             | zoom in                                                                    |
|`o`                       | overview mode                                                              |
|`e`                       | toggle back/forth to pdf export mode                                       |
|`m`                       | toggle menu                                                                |
|`?`                       | see more tips                                                              |

\

::: {.callout-tip}
More tips at: <https://quarto.org/docs/presentations/revealjs/presenting.html>
:::

::: {.notes}
If you can't remember these keyboard shortcuts, just click the menu button and go to 'Tools'.
:::

## Other HTML Outputs from Quarto

\

::: {.centerme}
Websites:   
[https://nasa-openscapes.github.io/](https://nasa-openscapes.github.io/){target="_blank" rel="noopener"}

\

Scrollytelling:  
[https://closeread.dev/gallery/](https://closeread.dev/gallery/){target="_blank" rel="noopener"}

\

Dashboards:  
[https://quarto.org/docs/gallery/#dashboards](https://quarto.org/docs/gallery/#dashboards){target="_blank" rel="noopener"}
:::


## Getting Help: Guides, Community, Documentation

\

### Tips 'n Tricks

 - <https://mine-cetinkaya-rundel.github.io/quarto-tip-a-day>

## Getting Help: GenAI

\

::: {style = "margin:0 2em; font-size:120%; font-style:italic; font-family:serif; color:#444;"}
I'm making a revealjs slide deck with Quarto, which I will present on a projector in a classroom. How do I make the font bigger on all of my slides, so students in the back of the room can see everything clearly.
:::

\

::: {.callout-tip}
## Tips for Using GenAI

- ask a clear, straight forward question  
- provide context about the setting and your goal
- make sure you're in compliance with your organization's GenAI policies
:::

